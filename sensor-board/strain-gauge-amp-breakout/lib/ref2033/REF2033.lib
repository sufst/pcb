* REF20XX (PSpice format)
*****************************************************************************
* (C) Copyright 2014 Texas Instruments Incorporated. All rights reserved.     
*****************************************************************************
** This model is designed as an aid for customers of Texas Instruments.      
** TI and its licensors and suppliers make no warranties, either expressed   
** or implied, with respect to this model, including the warranties of       
** merchantability or fitness for a particular purpose. The model is        
** provided solely on an "as is" basis. The entire risk as to its quality   
** and performance is with the customer                                    
*****************************************************************************	
* Released by: Analog eLab Design Center, Texas Instruments Inc.
* Part: REF20xx Low-Drift, Low-Power, Dual-Output, VREF and VREF / 2 Voltage Reference  
* Date: 2014-06-10
* Model Type: TINA, PSpice
* Simulator: TINA-TI, PSpice
* Simulator Version: TINA 9.3.50.40 SF-TI, PSpice 16.3.0
* Datasheet: SBOS600-MAY 2014
*
*****************************************************************************
* version 1.2:
*****************************************************************************	
*$
*PRODUCT VREF   VBIAS
*REF2025 2.5V   1.25V
*REF2030 3.0V   1.5V
*REF2033 3.3V   1.65V
*REF2041 4.096V 2.048V

.SUBCKT REF2033 VBIAS GND EN VIN VREF
X1 VBIAS GND EN VIN VREF REF20XX PARAMS: VOUT=3.3
.ENDS

.SUBCKT REF20XX VBIAS GND EN VIN VREF PARAMS: VOUT=2.5
VPSref      19 GND 5
VS2         GND 21 600.063316767M
VS1         20 GND 600.063316767M
XU4         GND V1_25 RES
+ PARAMS: ERR=4M ERR_TC=1.5
XU6         GND VBIAS Neg_13 GAINSET
+ PARAMS: GERR=0 GERR_TC=0 VOUT={VOUT} 
XU5         GND VREF Neg_15 GAINSET_1
+ PARAMS: GERR=1M GERR_TC=1 VOUT={VOUT} 
XU1 Neg_13 Bias VIN POROi GND Vt0p Vt0 VnR Plus_16 Veps Vn VBIAS Output 
XU2 Neg_15 Bias VIN POROi GND Vt0p Vt0 VnR Plus_17 Veps Vn VREF Output 
R11ops      18 GND 9.998K 
L1ops       18 GND 15.9139026006U  
R1ops       Veps 18 1 
G1ops       GND Veps 19 VIN  3.6M
Cdin1       EN GND 3P 
Rdin1       EN GND 50MEG 
XD5         EN VIN D_D2
XD4         GND EN D_D2
XD3         VREF VIN D_D2
XD2         GND VREF D_D2
XD11        VBIAS VIN D_D2
XD1         GND VBIAS D_D2
C1          V1_25 GND 1P 
GV1_25      GND V1_25 VALUE = {IF(V(POROi,GND)<0.5,0,1.25)}
Gpsn2       V1_25 Plus_16 POLY(3) Veps GND Vn GND VnR GND 0 0 1 0 
R1          V1_25 Plus_16 1 
Rn2         VnR GND 1.206581545MEG 
XBiasOut    VIN GND Bias Vt0p Vt0 EN POROi Bias
Rn1         VnR GND 1.206581545MEG 
Gpsn        V1_25 Plus_17 POLY(3) Veps GND Vn GND VnR GND 0 0 1 0 
R2          V1_25 Plus_17 1 
XD10        20 Vn D_DNOISE
XD9         Vn 21 D_DNOISE
.ENDS

.SUBCKT Output Neg Bias VDD2 POR GND2 Vt0p Vt0 VnR Plus Veps Vn OUT
VOLo        GND2 VLo_26 5.4755793924
VOHi        VHi_27 GND2 5.4755793924
SW1         VV_23 GND2 IEN_22 GND2  S_VSWITCH_1
GVCCS3      GND2 IEN_22 VALUE = {LIMIT(20*(100M-V(28,29)),0,V(POR,0))}
R1          IEN_22 GND2 1 
Ri2         29 GND2 50.4869218522K 
Ri1         GND2 28 50.4869218522K 
Gi2         GND2 29 Neg GND2  19.8071097091U
Gi1         GND2 28 Plus GND2  19.8071097091U
Ci3         28 29 100F  
Ci1         GND2 28 10P  
Ci2         29 GND2 10P  
EVps        30 VV_23 Veps 0 1
Cm1         OUT 31 53.8739422683P  
Rf1         VV_23 31 1K 
RN1         32 GND2 100M 
RP1         VDD2 33 100M 
XD5         VGP_34 Vt0p2_25 D_LIM1
XD3         Vt02_24 VGN_35 D_LIM1
GVCCS2      GND2 Vt02_24 Vt0 GND2 1
GVCCS1      Vt0p2_25 VDD2 VDD2 Vt0p 1
R5          Vt02_24 GND2 1 
R4          VDD2 Vt0p2_25 1 
Rm1         VV_23 GND2 621.4157688534MEG 
Gm21        Vt0 VGN_35 VALUE = {(V(POR,0)*LIMIT(10.266U*V(30,GND2),-64.648731U,64.648731U))}
Co21        Plus Neg 100F  
Gm1         VV_23 GND2 VALUE = {V(POR,0)*LIMIT(513.3N*V(28,29),-3.232437U,3.232437U)}
RGm1l       GND2 GND2 3.2324365361U 
RGm1        GND2 GND2 513.3N 
R3          VDD2 36 1 
GVMP2       36 VDD2 VALUE = {LIMIT(4*V(POR,0),-0.7,1.5457-0.65)}
R2          37 GND2 1 
GVMN2       GND2 37 VALUE = {V(POR,0)*LIMIT(4.0*V(Vt0,GND2),-0.7,1.8959-0.65)}
Co1         VV_23 GND2 9.0692875054F  
RGm2ll      GND2 GND2 64.648730722U 
RGm2lh      GND2 GND2 64.648730722U 
RGm2        GND2 GND2 10.266U 
Gm22        Vt0p VGP_34 VALUE = {(V(POR,0)*LIMIT(10.266U*V(30,GND2)-64.648731U*(1-V(IEN_22,GND2)),-64.648731U,64.648731U))}
XT3         OUT VGP_34 33 VDD2 Q_PMOS_OUT_L1
+ PARAMS: M=16 W=20U L=1U 
XT1         OUT VGN_35 32 GND2 Q_NMOS_OUT_L1
+ PARAMS: M=8 W=20U L=1U 
XD6         36 VGP_34 D_LIM1
XD4         VGN_35 37 D_LIM1
XD2         VV_23 VHi_27 D_LIM1
XD1         VLo_26 VV_23 D_LIM1
Ro23        GND2 Plus 1T 
Ro22        Neg GND2 1T 
Ro21        Neg Plus 1T 
Rm22        VGP_34 Vt0p 2.4352230664MEG 
Rm21        VGN_35 Vt0 2.4352230664MEG 
Co23        GND2 Plus 100F  
Co22        Neg GND2 100F  
.MODEL S_VSWITCH_1 VSWITCH (RON=10K ROFF=1T VON=0 VOFF=100M)
.ENDS


.SUBCKT Bias VDD2 GND2 Bias Vt0p Vt0 EN POROi
VS2         58 57 600.063316767M
VCIb1       56 59 ; Current Arrow
C2          Bias GND2 28.2842712475N 
R72         55 GND2 549.4505494505K TC=1.5M,-4U
GVT4G       GND2 Vt4g VALUE = {V(POROi,GND2)*V(57,GND2)}
R8          Vt4g GND2 1 TC=-9U,-30N
R71         VDD2 55 549.450549K TC=1.5M,-4U
GVMP1       Vt0p VDD2 VALUE = {V(POROi,GND2)*V(VDD2,56)}
GVMN1       GND2 Vt0 VALUE = {V(POROi,GND2)*V(57,GND2)}
C1          POROi GND2 1.4142135624N 
R5          POROi GND2 1K 
GPORO       GND2 POROi VALUE = {10.0E+2*(LIMIT(I(VCIB1),4.5U,5.5U)-4.5U)}
XT4         VT1 Vt4g GND2 GND2 Q_NMOS_OUT_L1_1
+ PARAMS: M=308 W=60U L=1U 
R6          58 57 1MEG 
R4          Vt0 GND2 1 
R1          VDD2 Vt0p 1 
XD1         58 59 D_LIM1
XT3         57 57 GND2 GND2 Q_NMOS_OUT_L1
+ PARAMS: M=8 W=60U L=1U 
XT2         56 56 VDD2 VDD2 Q_PMOS_OUT_L1
+ PARAMS: M=16 W=60U L=1U 
GIb2        GND2 Bias VALUE = {IF(V(EN,GND2)>V(55,GND2),1M,0)}
Rb3         Bias GND2 1K TC=1.735482M
R3          57 GND2 10MEG 
R2          VDD2 56 10MEG 
Rsp1        VDD2 VT1 8K 
GIb1        59 57 Bias GND2  10U
Rpsrr1      59 57 100MEG 
.ENDS

.SUBCKT D_D2       1    2
D1 1 2  D2
.ENDS

.SUBCKT RES  1 2 PARAMS: ERR=0.0 ERR_TC=0.0
.PARAM R_ = 1
.PARAM VREF = 1.25
.PARAM R_ERR = {ERR*0.01}
.PARAM R_TC = {ERR_TC*1E-6}
.PARAM R_1 = {(1+R_ERR)*R_}
R1 1 2 RMOD1 {R_1}
*.MODEL RMOD1 RES (TC1={R_TC} TC2={-15M*R_TC} TCE=0)
.MODEL RMOD1 RES (TC1={R_TC} TC2={-5M*R_TC} TCE=0)
.ENDS


.SUBCKT GAINSET  1 2 3 PARAMS: VOUT=2.5 GERR=0.0 GERR_TC=0.0
.PARAM RG = 1000K
.PARAM VREF = 1.25
.PARAM G = {0.5*VOUT/VREF}
.PARAM G_ERR = {GERR*0.01}
.PARAM G_TC = {GERR_TC*1E-6}
.PARAM RG_TC = {1.0*G_TC}
.PARAM RG1 = {(1-G_ERR)*RG}
.PARAM RG2 = {(1+G_ERR)*RG*(G-1)+1U}
R1 1 3 RMOD1 {RG1}
R2 3 2 RMOD2 {RG2}
.MODEL RMOD1 RES (TC1={-RG_TC} TC2={-0M*RG_TC} TCE=0)
.MODEL RMOD2 RES (TC1={0} TC2=0 TCE=0)
.ENDS


.SUBCKT GAINSET_1  1 2 3 PARAMS: VOUT=2.5 GERR=0.0 GERR_TC=0.0
.PARAM RG = 1000K
.PARAM VREF = 1.25
.PARAM G = {VOUT/VREF}
.PARAM G_ERR = {GERR*0.01}
.PARAM G_TC = {GERR_TC*1E-6}
.PARAM RG_TC = {1.0*G_TC}
.PARAM RG1 = {(1-G_ERR)*RG}
.PARAM RG2 = {(1+G_ERR)*RG*(G-1)+1U}
R1 1 3 RMOD1 {RG1}
R2 3 2 RMOD2 {RG2}
.MODEL RMOD1 RES (TC1={-RG_TC} TC2={-0M*RG_TC} TCE=0)
.MODEL RMOD2 RES (TC1={0} TC2=0 TCE=0)
.ENDS

.SUBCKT D_DNOISE       1    2
D1 1 2  DD
.MODEL DD D( IS=0.9E-18 N=1.0 AF=1 KF=3.3814E-18)
.ENDS

.SUBCKT D_LIM1   1 2
D1 1 2  D_LIM1
.ENDS

.SUBCKT Q_PMOS_OUT_L1    D G S B PARAMS:  M = 1 W = 100U L = 10U
M1 D G S B Q_PMOS_OUT_L1 W = {W} L = {L} M = {M} AD={W*LS} AS={W*LS} PD={W + 2*LS} PS={W + 2*LS} 
*M1 D G S B Q_PMOS_OUT W = {W} L = {L} M = {M} AD={W*LS} AS={W*LS} PD={W + 2*LS} PS={W + 2*LS} 
+ NRD={LS/W} NRS={LS/W}
.ENDS

.SUBCKT Q_NMOS_OUT_L1   D G S B PARAMS:  M = 1 W = 100U L = 10U
M1 D G S B Q_NMOS_OUT_L1  W = {W} L = {L} M = {M} AD={W*LS} AS={W*LS} PD={W + 2*LS} PS={W + 2*LS} 
*M1 D G S B Q_NMOS_OUT  W = {W} L = {L} M = {M} AD={W*LS} AS={W*LS} PD={W + 2*LS} PS={W + 2*LS} 
+ NRD={LS/W} NRS={LS/W}
.ENDS

.SUBCKT Q_NMOS_OUT_L1_1   D G S B PARAMS:  M = 1 W = 100U L = 10U
M1 D G S B Q_NMOS_OUT_L1  W = {W} L = {L} M = {M} AD={W*LS} AS={W*LS} PD={W + 2*LS} PS={W + 2*LS} 
+ NRD={LS/W} NRS={LS/W}
.MODEL Q_NMOS_OUT_L1 NMOS LEVEL=1 L={L} W={W} KP={KPN} VTO={VTOHN} LAMBDA={25M} GAMMA={GAMMA} 
.ENDS

*PARAMETERS: 0.4UM CMOS
.PARAM LS = 1.0U
.PARAM VTOHP = 0.70
.PARAM VTOHN = 0.70
.PARAM LAMBDA = 25M
.PARAM LAMBDAP = 25M
.PARAM LAMBDAN = 25M
.PARAM GAMMA = 0.0
.PARAM KAPPA = 1.0
.PARAM THETA = 0.1
.PARAM ETA = 0.05
.PARAM PHI = 0.6
.PARAM EPSSIO2 = {3.9*8.854214871E-12}
.PARAM TOX = 80E-10
.PARAM COX = {EPSSIO2/TOX}
.PARAM KPN = {UON*COX * 1E-4}
.PARAM KPP = {UOP*COX * 1E-4}
.PARAM LDN = 0.09U
.PARAM LDP = 0.09U
.PARAM RSW = 1810
.PARAM RSN = 1.41
.PARAM RSH = 4.0
.PARAM RDS = 100.0MEG
.PARAM VBMUL = 1E6
.PARAM RPAR = 1T
.PARAM CBDJ = 1.0 
.PARAM CBDS = 1.0
.PARAM CGBF = 1.0
.PARAM PBP = 0.7
.PARAM PBN = 0.7
.PARAM UON = 900
.PARAM UOP = 900
.PARAM CNM = 0.5 
.PARAM CPM = 0.5
.PARAM CJN = {CNM*200U}
.PARAM CJP = {CPM*400U} 
.PARAM CJSWN = {CNM*1.2N}
.PARAM CJSWP = {CPM*2.4N}
.PARAM XJN = 0.15U
.PARAM CGSON = {CNM*0.6*XJN*COX} 
.PARAM CGDON = {CNM*CGSON}
.PARAM CGBON = {CNM*CGBF*CGDON}
.PARAM XJP = 0.18U
.PARAM CGSOP = {CPM*0.6*XJP*COX} 
.PARAM CGDOP = {CPM*CGSOP}
.PARAM CGBOP = {CPM*CGBF*CGDOP}
*$
.MODEL  SW1 VSWITCH RON=10 ROFF=1E12 VON=0.6V VOFF=0.4V 
*$
.MODEL  SW2 VSWITCH RON=100m ROFF=1E12 VON=0.6V VOFF=0.4V 
*$
.MODEL  SW2IC VSWITCH RON=100m ROFF=1E12 VON=0.4V VOFF=0.6V 
*$
.MODEL Q_NMOS NMOS LEVEL=1 L=2U W=10U KP={KPN} VTO={VTOHN}  AF=0 KF=0
*$
.MODEL Q_PMOS PMOS LEVEL=1 L=2U W=10U KP={KPP} VTO={-VTOHP}  AF=0 KF=0
*$
.MODEL Q_NMOS_OUT_L1 NMOS LEVEL=1 L=10U W=100U KP={KPN} VTO={VTOHN} LAMBDA={LAMBDAN} GAMMA={GAMMA} 
+ CJ={CJN} CJSW={CJSWN} CGSO={CGSON} CGDO={CGDON} RSH={RSH} PB={PBN} LD= {LDN} RDS={RDS} PHI={PHI}  AF=0 KF=0.0
*+ RSH={RSH} PB={PBN} LD= {LDN} RDS={RDS} PHI={PHI}  AF=0 KF=0.0
*$
.MODEL Q_NMOS_OUT NMOS LEVEL=3 L=10U W=100U KP={KPN} VTO={VTOHN}
+ CJ={CJN} CJSW={CJSWN} CGSO={CGSON} CGDO={CGDON} RSH={RSH} PB={PBN} LD= {LDN} RDS={RDS} TOX={TOX} XJ={XJN}
*+  THETA={THETA} GAMMA={GAMMA} KAPPA={KAPPA} ETA={ETA} PHI={PHI}  AF=0 KF=0
+  THETA={THETA} GAMMA={GAMMA} KAPPA={KAPPA} ETA={ETA} PHI={PHI}  AF=0 KF=0
*$
.MODEL Q_PMOS_OUT_L1 PMOS LEVEL=1 L=10U W=100U KP={KPP} VTO={-VTOHP} LAMBDA={LAMBDAP} GAMMA={GAMMA} 
+ CJ={CJP} CJSW={CJSWP} CGSO={CGSOP} CGDO={CGDOP} RSH={RSH} PB={PBP} LD= {LDP} RDS={RDS} PHI={PHI}  AF=0 KF=0.0
*+ RSH={RSH} PB={PBP} LD= {LDP} RDS={RDS} PHI={PHI}  AF=0 KF=0.0
*$
.MODEL Q_PMOS_OUT PMOS LEVEL=3 L=10U W=100U KP={KPP} VTO={-VTOHP}
+ CJ={CJP} CJSW={CJSWP} CGSO={CGSOP} CGDO={CGDOP} RSH={RSH} PB={PBP} LD= {LDP} RDS={RDS} TOX={TOX} XJ={XJP}
*+  THETA={THETA} GAMMA={GAMMA} KAPPA={KAPPA} ETA={ETA} PHI={PHI}  AF=0 KF=0
+  THETA={THETA} GAMMA={GAMMA} KAPPA={KAPPA} ETA={ETA} PHI={PHI}  AF=0 KF=0
*$
.MODEL D_LIM0 D( IS=10F N=10.0 RS=1 XTI=0 AF=0 KF=0 EG=1.11)
*$
.MODEL D_LIM1 D( IS=10F N=1.0 RS=100 XTI=0 AF=0 KF=0 EG=0.48)
*$
*.MODEL D_LIM1 D( IS=10F N=1.0 RS=10 XTI=0 AF=0 KF=0 EG=1.11)
.MODEL D_LIM1T D( IS=10F N=1.0 RS=10 XTI=0 AF=0 KF=0 EG=0.555)
*$
.MODEL D_LIM01 D( IS=10F N=0.1 RS=10 XTI=0 AF=0 KF=0 EG=0.111)
*$
.MODEL D_LIM2 D( IS=10F N=0.5 RS=1 XTI=0 AF=0 KF=0 EG=0.555 )
*$
.MODEL D_LIM3 D( IS=1E-18 N=1.0 RS=1 XTI=0 AF=0 KF=0)
*$
.MODEL D1 D( IS=1P N=1.0 RS=0 XTI=3 AF=0 KF=0 )
*$
.MODEL D_2V D( IS=10F N=1.0 BV=2.0 IBV=10.0U RS=10 XTI=0 EG=1.11 )
*$
.MODEL D_Z5V D( IS=1P N=1.0 BV=5.0 IBV=10.0U RS=10 XTI=0 EG=0.48 )
*$
.MODEL D2 D( IS=1P N=1.0 XTI=0 RS=10 )
*$
